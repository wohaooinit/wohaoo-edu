//>>built
define("edu/wohaoo/mobile/ItemMenuPageView","dojo/dom-class dojo/query!css3 dojo/_base/connect dojo/_base/declare dijit/_WidgetBase dojo/dom-construct dijit/registry edu/wohaoo/mobile/ItemPageView dojo/i18n!./nls/Messages dojo/domReady!".split(" "),function(f,h,g,k,n,p,d,l,m){return k([l],{addFavoriteButton:null,sysMessages:m,postCreate:function(){this.inherited(arguments)},refresh:function(){this.inherited(arguments);var a=this;h(".iconMenu",this.domNode).forEach(function(b){b._clickEvent&&g.disconnect(b._clickEvent);
b._clickEvent=g.connect(b,"click",function(b){var e=d.byNode(this),c=d.byId(e.moveTo);c.set("dataId",a.dataId);c.set("model",a.itemModel);c.refresh();a.moveTo(a.id,e.moveTo,e.transition);b.stopPropagation();b.preventDefault()})});h(".nextButton",this.domNode).forEach(function(b){b._clickEvent&&g.disconnect(b._clickEvent);b._clickEvent=g.connect(b,"click",function(b){var e=d.byNode(this),c=d.byId(e.moveTo);c.set("dataId",a.dataId);c.refresh();a.moveTo(a.id,e.moveTo,e.transition);b.stopPropagation();
b.preventDefault()})});h(".addFavoriteButton",this.domNode).forEach(function(b){if(a.itemModel&&"curriculum"===a.itemModel){a.addFavoriteButton=b;b="";b=Sys.getCurriculumFavorites();var d=a.dataId;b.match(d+"($|,)")?f.add(a.addFavoriteButton,"favorite"):f.contains(a.addFavoriteButton,"favorite")&&f.remove(a.addFavoriteButton,"favorite");a.addFavoriteButton._clickEvent&&a.addFavoriteButton._clickEvent.remove();a.addFavoriteButton._clickEvent=null;a.addFavoriteButton._clickEvent=g.connect(a.addFavoriteButton,
"click",function(b){var c=Sys.getCurriculumFavorites(),c=c.split(","),c=c.filter(function(a){return""!==a});f.contains(a.addFavoriteButton,"favorite")?(f.remove(a.addFavoriteButton,"favorite"),c=c.filter(function(b){return b!==a.dataId.toString()}),c=c.join(","),Sys.setCurriculumFavorites(c),Sys.message(a.sysMessages.FavoriteRemoved.format(a.itemName))):(f.add(a.addFavoriteButton,"favorite"),Sys.setCurriculumFavoriteDate(d.toString(),(new Date).getTime().toString()),c[c.length]=a.dataId.toString(),
c=c.join(","),Sys.setCurriculumFavorites(c),Sys.message(a.sysMessages.FavoriteAdded.format(a.itemName)));b.stopPropagation();b.preventDefault()})}})}})});
//@ sourceMappingURL=ItemMenuPageView.js.map