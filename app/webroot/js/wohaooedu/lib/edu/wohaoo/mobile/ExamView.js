//>>built
define("edu/wohaoo/mobile/ExamView","dojo/dom-class dojo/_base/array dojo/query!css3 dojo/_base/connect dojo/_base/declare dijit/_WidgetBase dojo/dom-construct edu/wohaoo/mobile/ItemPageView dojox/mobile/ListItem dijit/registry dojo/i18n!./nls/Messages dojo/domReady!".split(" "),function(e,f,d,g,k,p,q,l,m,h,n){return k([l],{listNode:null,sessionId:0,questionId:0,optionId:0,forceNew:0,completed:!1,messages:n,questionNode:null,examDetailsNode:null,examScoreNode:null,examCommentNode:null,examNextButtonNode:null,
examRetakeButtonNode:null,postCreate:function(){this.itemTemplateString="";this.itemClass="question";var a=this;d(".questionCategory",this.domNode).forEach(function(b){a.questionNode=b});d(".examNextButton",this.domNode).forEach(function(b){a.examNextButtonNode=b});d(".examRetakeButton",this.domNode).forEach(function(b){a.examRetakeButtonNode=b});d(".examDetails",this.domNode).forEach(function(b){a.examDetailsNode=b});d("span.examScore",a.examDetailsNode).forEach(function(b){a.examScoreNode=b});d("span.examComment",
a.examDetailsNode).forEach(function(b){a.examCommentNode=b});this.inherited(arguments)},refresh:function(){this.inherited(arguments);if(this._store&&null!==this._store){var a=this;d(".itemList",this.domNode).forEach(function(b){a.listNode=b});this.query={id:"*",model:"exam"};this._store.fetch({query:this.query,queryOptions:{deep:!0},onBegin:function(){a.hideItems()},onComplete:function(b){f.forEach(b,function(b,d){a.sessionId=a._store.getValue(b,"uniqueid");a._store.getValue(b,"text");a.completed=
a._store.getValue(b,"completed");if(a.completed){if(e.contains(a.examDetailsNode,"mblHidden")){var c=a._store.getValue(b,"score");a.examScoreNode.innerText=c.toString();a._store.getValue(b,"passed")?a.examCommentNode.innerText="Passed":a.examCommentNode.innerText="Failed";e.remove(a.examDetailsNode,"mblHidden")}}else e.contains(a.examDetailsNode,"mblHidden")||e.add(a.examDetailsNode,"mblHidden")})},onError:function(b){a.alert(a.errors.err102)}});this.query={id:"*",model:"question"};this._store.fetch({query:this.query,
queryOptions:{deep:!0},onBegin:function(){a.hideItems()},onComplete:function(b){f.forEach(b,function(b,d){a.questionId=a._store.getValue(b,"uniqueid");var c=a._store.getValue(b,"text");a.questionNode.innerHTML=c})},onError:function(b){a.alert(a.errors.err102)}});this.query={id:"*",model:"option"};this._store.fetch({query:this.query,queryOptions:{deep:!0},onBegin:function(){a.hideItems()},onComplete:function(b){f.forEach(b,function(b,d){var c=new m({"class":a.itemClass,dataId:a._store.getValue(b,"uniqueid"),
variableHeight:!0});c.placeAt(a.listNode,"first");var e=a._store.getValue(b,"text");c.labelNode.innerHTML=e;c._checkEvent&&(c._checkEvent.remove(),c._checkEvent=null);c._checkEvent=g.connect(c.domNode,"click",function(b){b=h.byNode(this);a.optionId=b.dataId})})},onError:function(b){a.alert(a.errors.err102)}});a.examNextButtonNode._clickEvent&&(a.examNextButtonNode._clickEvent.remove(),a.examNextButtonNode._clickEvent=null);a.examNextButtonNode._clickEvent=g.connect(a.examNextButtonNode,"click",function(b){a.completed?
h.byId("dlg_message").show(a.messages.EXAM_IS_COMPLETED):a.refresh()});a.examRetakeButtonNode._clickEvent&&(a.examRetakeButtonNode._clickEvent.remove(),a.examRetakeButtonNode._clickEvent=null);a.examRetakeButtonNode._clickEvent=g.connect(a.examRetakeButtonNode,"click",function(b){h.byId("dlg_confirm").show(a.messages.CONFIRM_EXAM_RETAKE,function(){a.forceNew=1;a.refresh()})})}}})});
//@ sourceMappingURL=ExamView.js.map