//>>built
define("edu/wohaoo/mobile/AppListView","dojo/_base/array dojo/on dojo/query!css3 dojo/_base/connect dojo/_base/declare dojox/mobile/ScrollableView dijit/_WidgetBase dojo/dom-construct dijit/registry edu/wohaoo/mobile/_AppViewMixin dojo/data/ItemFileReadStore dojo/domReady!".split(" "),function(n,p,k,l,q,r,u,v,m,s,t){return q([r,s],{noCover:!0,itemTemplateString:"",listNode:null,itemClass:"",_store:null,dataId:null,q:"",l:"",minId:0,maxId:0,dataUrl:null,autoScroll:!0,postCreate:function(){this.inherited(arguments);
var a=this;p(this,"beforescroll",function(b){a.__beforescroll(b)});k(".itemList",this.domNode).forEach(function(b){a.listNode=b})},hideItems:function(){k("."+this.itemClass,this.domNode).forEach(function(a){a.style.display="none"})},__beforescroll:function(a){if(!this.autoScroll||!a.afterBottom&&!a.beforeTop||40<a.afterBottomHeight||40<a.beforeTopHeight||this.busy)return!1;var b=!1,c=!1,b=0<a.beforeTopHeight,c=0<a.afterBottomHeight;this.dataParams=[];c&&0<this.maxId?this.dataParams[this.dataParams.length]=
["max_id\x3d"+this.maxId]:b&&0<this.minId&&(this.dataParams[this.dataParams.length]=["min_id\x3d"+this.minId]);0<this.dataParams.length&&this.refresh();return!0},updateItemList:function(){this.dataUrl="function"===typeof this.serviceUrl?this.serviceUrl.call(this):this.substitute(this.serviceUrl,this);if(null!==this.dataUrl&&(this.processDataParams(),(this._store=new t({url:this.dataUrl}))&&!(null===this._store||null===this.itemTemplateString||""===this.itemTemplateString))){var a=this;a._store.fetch({query:this.query,
onBegin:function(){a.hideItems();a.minId=0;a.maxId=0},onComplete:function(b){n.forEach(b,function(c,b){var e=c._S,f=e.getValue(c,"uniqueid"),g=e.getValue(c,"uniqueid"),h=e.getValue(c,"name"),d=a.createListItem(a.itemClass,f,h,a.itemMoveTo,a.itemTransition);if(!d||null===d)throw new Exception(__t("New Item is Null"));e=e.getValue(c,"icon");-1===e.indexOf("//")&&(f=Sys.getHttpScheme(),h=Sys.getHttpHost(),f&&h&&(e=f+"://"+h+e));c.icon=e;d.set("icon",e);d.placeAt(a.listNode,"last");a.updateItemContent(d,
a.itemTemplateString,c);"undefined"!==typeof d.moveTo&&(d.domNode._clickEvent&&l.disconnect(d.domNode._clickEvent),d.domNode._clickEvent=l.connect(d.domNode,"click",function(b){b=m.byNode(this);var c=m.byId(b.moveTo);c.set("dataId",b.dataId);c.refresh();a.moveTo(a.id,d.moveTo,b.transition)}));g>a.maxId&&(a.maxId=g);if(!a.minId||g<a.minId)a.minId=g})},onError:function(b){a.alert(a.errors.err102);throw b;}})}},updateItemContent:function(a,b,c){a.labelNode.innerHTML=this.substitute(self.itemTemplateString,
c)},refresh:function(){this.updateItemList();this.inherited(arguments)}})});
//@ sourceMappingURL=AppListView.js.map